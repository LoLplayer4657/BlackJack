using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;
using TMPro;

public class Betting : MonoBehaviour
{
    public Button red, yellow, blue, green, black;
    
    public TextMeshProUGUI redText, yellowText, blueText, greenText, blackText;
    
    public TextMeshProUGUI bankText, bettingText;

    public int redAmount, yellowAmount, blueAmount, greenAmount, blackAmount;

    private int startingAmount = 200;

    public int bank;

    public int betting;

    public GameObject buttonHolder;

    public GameObject startButton;

    public TextMeshProUGUI dealerText;

    void Start()
    {
        //Set all the poker chip amounts
        SetAmounts();
        
        //Lets the player start betting
        StartBetting();
    }

    // Update is called once per frame
    void Update()
    {
        Inept();
    }

    public void StartBetting()
    {
        //Update the text for betting and the bank
        UpdateText();
        //Brings all the UI (buttons, text, screens, dealer, etc.)
        BringUI();
        //If they made 5x the starting amount then all the chips would then get 
        ScaleAmount();
    }
    
    public void SetAmounts()
    {
        betting = 0;
        bank = startingAmount;

        redAmount = 5;
        yellowAmount = 10;
        blueAmount = 20;
        greenAmount = 50;
        blackAmount = 100;

        redText.text = redAmount.ToString();
        yellowText.text = yellowAmount.ToString();
        blueText.text = blueAmount.ToString();
        greenText.text = greenAmount.ToString();
        blackText.text = blackAmount.ToString();

    }
    public void ScaleAmount()
    {
        if (bank >= startingAmount * 5)
        {
            redAmount *= 5;
            yellowAmount *= 5;
            blueAmount *= 5;
            greenAmount *= 5;
            blackAmount *= 5;

            redText.text = redAmount.ToString();
            yellowText.text = yellowAmount.ToString();
            blueText.text = blueAmount.ToString();
            greenText.text = greenAmount.ToString();
            blackText.text = blackAmount.ToString();

            //Sets the new starting amount as the amount they just reached
            startingAmount *= 5;
        }
    }
    public void Inept()
    {
        Image redColor = red.GetComponent<Image>();
        Image yellowColor = yellow.GetComponent<Image>();
        Image blueColor = blue.GetComponent<Image>();
        Image greenColor = green.GetComponent<Image>();
        Image blackColor = black.GetComponent<Image>();


        //If (betting < chipAmount){button.enabled = false}
        if (bank < redAmount)
        {
            red.enabled = false;
            
            redColor.color = new Color32(255, 255, 255, 140);
        }
        if (bank < yellowAmount)
        {
            yellow.enabled = false;

            yellowColor.color = new Color32(255, 255, 255, 140);
        }
        if (bank < blueAmount)
        {
            blue.enabled = false;

            blueColor.color = new Color32(255, 255, 255, 140);
        }
        if (bank < greenAmount)
        {
            green.enabled = false;

            greenColor.color = new Color32(255, 255, 255, 140);
        }
        if (bank < blackAmount)
        {
            black.enabled = false;
            
            blackColor.color = new Color32(255, 255, 255, 140);
        }
        else
        {
            redColor.color = new Color32(255, 255, 255, 255);
            yellowColor.color = new Color32(255, 255, 255, 255);
            blueColor.color = new Color32(255, 255, 255, 255);
            greenColor.color = new Color32(255, 255, 255, 255);
            blackColor.color = new Color32(255, 255, 255, 255);

            black.enabled = true;
            green.enabled = true;
            blue.enabled = true;
            yellow.enabled = true;
            red.enabled = true;
        }
    }

    public void KnockUI()
    {
        buttonHolder.SetActive(false);
        dealerText.text = "";
        startButton.SetActive(false);
    }

    public void BringUI()
    {
       //Show all the chips
        buttonHolder.SetActive(true);
       
        startButton.SetActive(true);
        
        dealerText.enabled = true;
        dealerText.text = "Welcome!\nMinimum is $ " + redAmount + " to play";
    }

    public void BetRed()
    {
        if (bank >= redAmount)
        {
            betting += redAmount;
            bank -= redAmount;

            UpdateText();
        }
    }
    public void BetYellow()
    {
        if (bank >= yellowAmount)
        {
            betting += yellowAmount;
            bank -= yellowAmount;

            UpdateText();
        }
    }
    public void BetBlue()
    {
        if (bank >= blueAmount)
        {
            betting += blueAmount;
            bank -= blueAmount;

            UpdateText();
        }
    }
    public void BetGreen()
    {
        if (bank >= greenAmount)
        {
            betting += greenAmount;
            bank -= greenAmount;

            UpdateText();
        }
    }
    public void BetBlack()
    {
        if (bank >= blackAmount)
        {
            betting += blackAmount;
            bank -= blackAmount;

            UpdateText();
        }
    }

    public void UpdateText()
    {
        bettingText.text = "Betting: $" + betting.ToString();
        bankText.text = "Bank: $" + bank.ToString();
    }

    public void Add()
    {
        betting *= 2;
        bank += betting;
        betting = 0;
        UpdateText();

        dealerText.text = "Congrats!\nYou won!";
    }

    public void Lose()
    {
        betting = 0;
        UpdateText();

        dealerText.text = "Next time,\nBOZO!";
    }

    public void Draw()
    {
        bank += betting;
        betting = 0;
        UpdateText();

        dealerText.text = "Shucks,\nIt was a tie!";
    }
}
